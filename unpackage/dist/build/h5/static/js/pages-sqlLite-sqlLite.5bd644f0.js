(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-sqlLite-sqlLite"],{"24cc":function(n,t,e){"use strict";var c=e("4ea4");e("99af"),e("d81d"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=c(e("f5e1")),a={data:function(){return{listData:[]}},onLoad:function(){this.openSQL()},methods:{openSQL:function(){var n=o.default.isOpen();console.log("数据库状态",n?"开启":"关闭"),n||o.default.openSqlite().then((function(n){console.log("数据库已打开")})).catch((function(n){console.log("数据库开启失败")}))},closeSQL:function(){var n=o.default.isOpen();n&&o.default.closeSqlite().then((function(n){console.log("数据库已关闭")})).catch((function(n){console.log("数据库关闭失败")}))},createTable:function(){var n=o.default.isOpen();if(n){this.openSQL();var t='"id" INTEGER PRIMARY KEY AUTOINCREMENT,"name" text,"content" text,"time" text';o.default.createTable("chat",t).then((function(n){console.log("创建chat表成功")})).catch((function(n){console.log("创建表失败")}))}else console.log("数据库未打开")},insertTableData:function(){var n=this,t=o.default.isOpen();if(t){var e=[{name:"小明",content:"你好呀"},{name:"小红",content:"HI"}];e.map((function(t){var e=n.formatDate((new Date).getTime()),c="'".concat(t.name,"','").concat(t.content,"','").concat(e,"'"),a="'name','content','time'";o.default.insertTableData("chat",c,a).then((function(t){console.log("新增数据成功"),n.selectTableData()})).catch((function(n){console.log("失败",n)}))}))}else this.showToast("数据库未打开")},selectTableData:function(){var n=this,t=o.default.isOpen();t?o.default.selectTableData("chat").then((function(t){console.log("contact表数据",t),n.listData=t})).catch((function(n){console.log("查询失败",n)})):this.showToast("数据库未打开")},updateTableData:function(){var n=this,t=o.default.isOpen();if(t){var e=this.formatDate((new Date).getTime()),c="content = '我被修改了',time = '".concat(e,"'");o.default.updateTableData("chat",c,"name","小明").then((function(t){n.showToast("更新chat表成功"),n.selectTableData()})).catch((function(n){console.log("修改失败",n)}))}else this.showToast("数据库未打开")},deleteTableData:function(){var n=this,t=o.default.isOpen();t?o.default.deleteTableData("chat","name","小红").then((function(t){n.showToast("删除表数据成功"),n.selectTableData()})).catch((function(n){console.log("删除失败",n)})):this.showToast("数据库未打开")},showToast:function(n){uni.showToast({icon:"none",title:n,mask:!0})},formatDate:function(n){var t=new Date(n),e=t.getFullYear(),c=t.getMonth()+1<10?"0"+(t.getMonth()+1):t.getMonth()+1,o=t.getDate()<10?"0"+t.getDate():t.getDate(),a=t.getHours()<10?"0"+t.getHours():t.getHours(),i=t.getMinutes()<10?"0"+t.getMinutes():t.getMinutes(),s=t.getSeconds()<10?"0"+t.getSeconds():t.getSeconds();return e+"-"+c+"-"+o+" "+a+":"+i+":"+s}}};t.default=a},"29be":function(n,t,e){"use strict";e.r(t);var c=e("24cc"),o=e.n(c);for(var a in c)"default"!==a&&function(n){e.d(t,n,(function(){return c[n]}))}(a);t["default"]=o.a},"6d48":function(n,t,e){"use strict";e.r(t);var c=e("f73e"),o=e("29be");for(var a in o)"default"!==a&&function(n){e.d(t,n,(function(){return o[n]}))}(a);var i,s=e("f0c5"),u=Object(s["a"])(o["default"],c["b"],c["c"],!1,null,"0423ad60",null,!1,c["a"],i);t["default"]=u.exports},f5e1:function(n,t,e){e("99af"),e("d3b7"),n.exports={dbName:"zht",dbPath:"_downloads/zht.db",isOpen:function(){var n=plus.sqlite.isOpenDatabase({name:this.dbName,path:this.dbPath});return n},openSqlite:function(){var n=this;return new Promise((function(t,e){plus.sqlite.openDatabase({name:n.dbName,path:n.dbPath,success:function(n){t(n)},fail:function(n){e(n)}})}))},closeSqlite:function(){var n=this;return new Promise((function(t,e){plus.sqlite.closeDatabase({name:n.dbName,success:function(n){t(n)},fail:function(n){e(n)}})}))},createTable:function(n,t){var e=this;return new Promise((function(c,o){plus.sqlite.executeSql({name:e.dbName,sql:"CREATE TABLE IF NOT EXISTS ".concat(n,"(").concat(t,")"),success:function(n){c(n)},fail:function(n){o(n)}})}))},dropTable:function(n){var t=this;return new Promise((function(e,c){plus.sqlite.executeSql({name:t.dbName,sql:"DROP TABLE ".concat(n),success:function(n){e(n)},fail:function(n){c(n)}})}))},insertTableData:function(n,t,e){var c=this;if(void 0!==n&&void 0!==t){var o="{}"==JSON.stringify(t);if(o)return new Promise((function(n,t){t("错误添加")}));if(void 0==e)var a="INSERT INTO ".concat(n," VALUES('").concat(t,"')");else a="INSERT INTO ".concat(n," (").concat(e,") VALUES(").concat(t,")");return new Promise((function(n,t){plus.sqlite.executeSql({name:c.dbName,sql:a,success:function(t){n(t)},fail:function(n){t(n)}})}))}return new Promise((function(n,t){t("错误添加")}))},insertOrReplaceData:function(n,t,e){var c=this;if(void 0!==n&&void 0!==t){if(void 0==e)var o="INSERT OR REPLACE INTO ".concat(n," VALUES('").concat(t,"')");else o="INSERT OR REPLACE INTO ".concat(n," (").concat(e,") VALUES(").concat(t,")");return new Promise((function(n,t){plus.sqlite.executeSql({name:c.dbName,sql:o,success:function(t){n(t)},fail:function(n){t(n)}})}))}return new Promise((function(n,t){t("错误添加")}))},selectTableData:function(n,t,e,c,o,a,i,s,u){var l=this;if(void 0!==n){if(void 0!==t&&void 0!==c&&void 0!==a&&void 0!==s)var f="SELECT * FROM ".concat(n," WHERE ").concat(t," = '").concat(e,"' AND ").concat(c," = '").concat(o,"' AND ").concat(a,"='").concat(i,"' AND ").concat(s,"='").concat(u,"' ");else if(void 0!==t&&void 0!==c&&void 0!==a)f="SELECT * FROM ".concat(n," WHERE ").concat(t," = '").concat(e,"' AND ").concat(c," = '").concat(o,"' AND ").concat(a,"='").concat(i,"'");if(void 0!==t&&void 0!==c&&void 0==a)f="SELECT * FROM ".concat(n," WHERE ").concat(t," = '").concat(e,"' AND ").concat(c," = '").concat(o,"'");if(void 0!==t&&void 0==c&&void 0==a)f="SELECT * FROM ".concat(n," WHERE ").concat(t," = '").concat(e,"'");if(void 0==t)f="SELECT * FROM ".concat(n);return console.log("查询sql语句",f),new Promise((function(n,t){plus.sqlite.selectSql({name:l.dbName,sql:f,success:function(t){n(t)},fail:function(n){t(n)}})}))}return new Promise((function(n,t){t("错误查询")}))},selectTableData1:function(n,t){var e=this;if(void 0!==n){var c="SELECT * FROM "+n+" where isUpload='false' and  isLine='false'  LIMIT "+t;return console.log("查询sql语句",c),new Promise((function(n,t){plus.sqlite.selectSql({name:e.dbName,sql:c,success:function(t){n(t)},fail:function(n){t(n)}})}))}return new Promise((function(n,t){t("错误查询")}))},selectgetTotalCont:function(n){var t=this;if(void 0!==n){var e="select count(*) count FROM scan_info WHERE isUpload='false' and isLine='false'";return console.log("查询sql语句",e),new Promise((function(n,c){plus.sqlite.selectSql({name:t.dbName,sql:e,success:function(t){n(t)},fail:function(n){c(n)}})}))}return new Promise((function(n,t){t("错误查询")}))},deleteTableData:function(n,t,e,c,o){var a=this;if(void 0!==n){if(void 0==t)var i="DELETE FROM ".concat(n);else if(void 0!==c)i="DELETE FROM ".concat(n," WHERE ").concat(t," = '").concat(e,"' AND ").concat(c," = '").concat(o,"'");else i="DELETE FROM ".concat(n," WHERE ").concat(t," = '").concat(e,"'");return new Promise((function(n,t){plus.sqlite.executeSql({name:a.dbName,sql:i,success:function(t){n(t)},fail:function(n){t(n)}})}))}return new Promise((function(n,t){t("错误删除")}))},updateTableData:function(n,t,e,c){var o=this;if(void 0==e)var a="UPDATE ".concat(n," SET ").concat(t);else a="UPDATE ".concat(n," SET ").concat(t," WHERE ").concat(e," = '").concat(c,"'");return new Promise((function(n,t){plus.sqlite.executeSql({name:o.dbName,sql:a,success:function(t){n(t)},fail:function(n){t(n)}})}))},pullSQL:function(n,t,e){var c=this;return new Promise((function(o,a){plus.sqlite.selectSql({name:c.dbName,sql:"SELECT * FROM ".concat(n," ORDER BY '").concat(t,"' DESC LIMIT 15 OFFSET '").concat(e,"'"),success:function(n){o(n)},fail:function(n){a(n)}})}))},selWuxiaoNum:function(){var n=this;return new Promise((function(t,e){plus.sqlite.selectSql({name:n.dbName,sql:'SELECT count(*) count FROM scan_info WHERE isLine="false" AND isUpload="no"',success:function(n){t(n)},fail:function(n){e(n)}})}))},delWuxiaodata:function(){var n=this;return new Promise((function(t,e){plus.sqlite.selectSql({name:n.dbName,sql:"DELETE FROM scan_info WHERE isUpload ='no'",success:function(n){t(n)},fail:function(n){e(n)}})}))}}},f73e:function(n,t,e){"use strict";var c;e.d(t,"b",(function(){return o})),e.d(t,"c",(function(){return a})),e.d(t,"a",(function(){return c}));var o=function(){var n=this,t=n.$createElement,e=n._self._c||t;return e("v-uni-view",[e("v-uni-view",{staticClass:"uni-divider uni-divider__content"},[n._v("Demo")]),e("v-uni-button",{on:{click:function(t){arguments[0]=t=n.$handleEvent(t),n.openSQL.apply(void 0,arguments)}}},[n._v("打开数据库")]),e("v-uni-button",{on:{click:function(t){arguments[0]=t=n.$handleEvent(t),n.createTable.apply(void 0,arguments)}}},[n._v("创建表")]),e("v-uni-button",{on:{click:function(t){arguments[0]=t=n.$handleEvent(t),n.insertTableData.apply(void 0,arguments)}}},[n._v("新增表数据")]),e("v-uni-button",{on:{click:function(t){arguments[0]=t=n.$handleEvent(t),n.selectTableData.apply(void 0,arguments)}}},[n._v("查询表数据")]),e("v-uni-button",{on:{click:function(t){arguments[0]=t=n.$handleEvent(t),n.updateTableData.apply(void 0,arguments)}}},[n._v("修改表数据")]),e("v-uni-button",{on:{click:function(t){arguments[0]=t=n.$handleEvent(t),n.deleteTableData.apply(void 0,arguments)}}},[n._v("按条件删除表数据")]),e("v-uni-button",{on:{click:function(t){arguments[0]=t=n.$handleEvent(t),n.closeSQL.apply(void 0,arguments)}}},[n._v("关闭数据库")]),n._l(n.listData,(function(t,c){return e("v-uni-view",{key:c,staticClass:"uni-divider__content"},[e("v-uni-view",[n._v("名字:"+n._s(t.name))]),e("v-uni-view",[n._v("内容:"+n._s(t.content))]),e("v-uni-view",[n._v("时间:"+n._s(t.time))])],1)}))],2)},a=[]}}]);