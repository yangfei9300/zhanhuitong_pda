(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-login-login"],{"26c5":function(t,n,o){var e=o("f1d5");"string"===typeof e&&(e=[[t.i,e,""]]),e.locals&&(t.exports=e.locals);var i=o("4f06").default;i("eff57696",e,!0,{sourceMap:!1,shadowMode:!1})},"290f":function(t,n,o){"use strict";o.r(n);var e=o("5733"),i=o("c6ec");for(var a in i)"default"!==a&&function(t){o.d(n,t,(function(){return i[t]}))}(a);o("953c");var s,c=o("f0c5"),l=Object(c["a"])(i["default"],e["b"],e["c"],!1,null,"11a8125e",null,!1,e["a"],s);n["default"]=l.exports},5733:function(t,n,o){"use strict";var e;o.d(n,"b",(function(){return i})),o.d(n,"c",(function(){return a})),o.d(n,"a",(function(){return e}));var i=function(){var t=this,n=t.$createElement,o=t._self._c||n;return o("v-uni-view",[o("v-uni-view",{staticClass:"colonn center_center pore"},[o("v-uni-view",{staticClass:"roww endend poab",staticStyle:{"margin-top":"30rpx",top:"0rpx"},on:{click:function(n){n.stopPropagation(),arguments[0]=n=t.$handleEvent(n),t.lixianClick.apply(void 0,arguments)}}},[o("v-uni-view",{staticClass:"allline"}),2==t.isLixian?o("v-uni-image",{staticClass:"w-30 h-30",attrs:{src:"/static/xuanzhongsel.png"}}):o("v-uni-image",{staticClass:"w-30 h-30",attrs:{src:"/static/xuanzhongno.png"}}),o("v-uni-view",[t._v("是否开启离线模式（请联系管理员操作）")]),o("v-uni-view",{staticClass:"w-35"})],1),o("v-uni-view",{staticClass:"h-50"}),o("v-uni-view",{staticClass:"colonn  p-all-25 "},[o("v-uni-view",{staticClass:"roww  center_center fs-35 border_bottom m-top-25 p-bottom-20",on:{longpress:function(n){arguments[0]=n=t.$handleEvent(n),t.isShowInfoClick.apply(void 0,arguments)}}},[o("v-uni-view",{staticClass:"roww center_center"},[o("v-uni-text",{staticClass:"color2_r m-right-5"},[t._v("*")]),o("v-uni-view",[t._v("扫码")])],1),o("v-uni-view",{staticClass:"w-20"}),o("v-uni-view",{staticClass:"roww center_center"},[t.scanInfo?o("v-uni-view",{staticClass:"colonn"},[o("v-uni-view",{staticStyle:{color:"blue"}},[t._v(t._s(t.scanInfo[0]))]),o("v-uni-view",{staticStyle:{color:"blue"}},[t._v("（"+t._s(t.scanInfo[3])+"）")])],1):o("v-uni-view",{staticStyle:{color:"red"}},[t._v("请扫码获取展会信息")])],1),o("v-uni-view",{staticClass:"allline"})],1),o("v-uni-view",{staticClass:"colonn  fs-35 border_bottom m-top-25 p-bottom-10"},[o("v-uni-view",{staticClass:"roww  center_center"},[o("v-uni-text",{staticClass:"color2_r m-right-5"},[t._v("*")]),o("v-uni-view",{staticClass:"fs-40"},[t._v("姓名")]),o("v-uni-view",{staticClass:"allline"})],1),o("v-uni-view",{staticClass:"h-15"}),o("v-uni-input",{staticClass:"fs-40 m-left-15",attrs:{maxlength:"11","placeholder-class":"fs-40",placeholder:"请输入姓名"},model:{value:t.form.staffName,callback:function(n){t.$set(t.form,"staffName",n)},expression:"form.staffName"}})],1),o("v-uni-view",{staticClass:"colonn  fs-35 border_bottom m-top-25 p-bottom-10"},[o("v-uni-view",{staticClass:"roww  center_center"},[o("v-uni-text",{staticClass:"color2_r m-right-5"},[t._v("*")]),o("v-uni-view",{staticClass:"fs-40"},[t._v("手机号")]),o("v-uni-view",{staticClass:"allline"})],1),o("v-uni-view",{staticClass:"h-15"}),o("v-uni-input",{staticClass:"fs-40 m-left-15",attrs:{maxlength:"11","placeholder-class":"fs-40",placeholder:"请输入手机号"},model:{value:t.form.phoneNum,callback:function(n){t.$set(t.form,"phoneNum",n)},expression:"form.phoneNum"}})],1),o("v-uni-view",{staticClass:"roww center_center",on:{click:function(n){n.stopPropagation(),arguments[0]=n=t.$handleEvent(n),t.loginstaffpda.apply(void 0,arguments)}}},[o("v-uni-view",{staticClass:"xiayibubtn fs-35"},[t._v("登录")])],1),o("v-uni-view",{staticClass:"roww center_center",on:{click:function(n){n.stopPropagation(),arguments[0]=n=t.$handleEvent(n),t.toYeji(1)}}},[o("v-uni-view",{staticClass:"xiayibubtn fs-35"},[t._v("查看业绩")])],1),t.isShowInfo?o("v-uni-view",{staticClass:"roww center_center",on:{longpress:function(n){arguments[0]=n=t.$handleEvent(n),t.toYeji(2)}}},[o("v-uni-view",{staticClass:"xiayibubtn fs-35"},[t._v("扫码记录")])],1):t._e(),t.isShowInfo?o("v-uni-view",{staticClass:"roww center_center",on:{longpress:function(n){arguments[0]=n=t.$handleEvent(n),t.toUploadPage()}}},[o("v-uni-view",{staticClass:"xiayibubtn fs-35"},[t._v("离线数据上传")])],1):t._e(),o("v-uni-view",{staticClass:"h-150"})],1)],1),o("v-uni-view",{staticClass:"gengxinbtn",on:{click:function(n){n.stopPropagation(),arguments[0]=n=t.$handleEvent(n),t.toGemhxom.apply(void 0,arguments)}}},[t._v("检查更新")]),o("v-uni-view",{staticClass:"gengxinbtn1 yincang1",on:{longpress:function(n){arguments[0]=n=t.$handleEvent(n),t.guanliyuanClick.apply(void 0,arguments)}}},[t._v("管理员")])],1)},a=[]},"58dc":function(t,n,o){"use strict";var e=o("4ea4");o("99af"),o("c975"),o("ac1f"),o("1276"),Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i=e(o("f5e1")),a={data:function(){return{form:{phoneNum:"",staffName:""},scanInfo:null,lianxu:!1,invTime:"1000",isLixian:1,isShowInfo:!1,time:"",saomare:""}},onLoad:function(){console.log("刚开始架子啊");var t=uni.getStorageSync("form_login");t&&(this.form=t);var n=uni.getStorageSync("exhInfo");n&&(this.scanInfo=n),this.openSQL()},onShow:function(){var t=this;uni.$off("scan"),uni.$on("scan",(function(n){console.log("扫码界面监听结果",n),t.initScan(n.data)}))},onUnload:function(){},methods:{guanliyuanClick:function(){console.log("管理员"),uni.navigateTo({url:"/pages/administrators/administrators",complete:function(t){console.log("阿萨德",t)}})},toUploadPage:function(){uni.navigateTo({url:"/pages/uploadNoLine/uploadNoLine"})},toGemhxom:function(){uni.navigateTo({url:"/pages/gengxin/gengxin"})},isShowInfoClick:function(){this.isShowInfo=!this.isShowInfo},toYeji:function(t){uni.navigateTo({url:"/pages/tongjiNum/tongjiNum?type="+t})},lixianClick:function(){this.isLixian=1==this.isLixian?2:1},initScan:function(t){var n=t.barcode;n.indexOf("~")>=0?(n=n.split("~"),this.scanInfo=n,uni.setStorageSync("exhInfo",n)):this.$tools.showToast("二维码不正确")},continueScanFunc:function(t){var n=this;this.lianxu=t,t&&barcodeModel.intervalSet(this.invTime,(function(t){n.$tools.showToast(t)})),barcodeModel.continueScan(t,(function(t){n.$tools.showToast(t)}))},toSqlite:function(){uni.navigateTo({url:"/pages/sqlLite/sqlLite",complete:function(t){console.log("跳转结果",t)}})},isLogin2:function(){return console.log("asdas",this.form),this.scanInfo?""==this.form.staffName?(this.$tools.showToast("请输入用户名"),!1):""==this.form.phoneNum?(this.$tools.showToast("请输入手机号"),!1):!!this.$tools.isPhoneNumber(this.form.phoneNum)||(this.$tools.showToast("请输入正确的手机号"),!1):(this.$tools.showToast("请先扫展会二维码"),!1)},loginstaffpda:function(){var t=this;if(!this.isLogin2())return!1;var n=this.form;if(uni.setStorageSync("form_login",n),uni.setStorageSync("isLixian",this.isLixian),this.selCountNUm(),2==this.isLixian)return uni.setStorageSync("userInfo",n),setTimeout((function(t){uni.reLaunch({url:"/pages/sanCode/sanCode"})}),200),!1;this.$axios.axios("post",this.$paths.loginstaffpda,n).then((function(o){console.log("登录结果",o,n),200==o.code?(n.userId=o.data,uni.setStorageSync("userInfo",n),setTimeout((function(t){uni.reLaunch({url:"/pages/sanCode/sanCode"})}),200)):t.$tools.showToast(o.msg)})).catch((function(t){}))},openSQL:function(){var t=this,n=i.default.isOpen();console.log("数据库状态",n?"开启":"关闭"),n?this.createTable():i.default.openSqlite().then((function(n){console.log("数据库已打开"),t.createTable()})).catch((function(t){console.log("数据库开启失败")}))},closeSQL:function(){var t=i.default.isOpen();t&&i.default.closeSqlite().then((function(t){console.log("数据库已关闭")})).catch((function(t){console.log("数据库关闭失败")}))},dropTable:function(t){i.default.dropTable(t).then((function(n){console.log("删除"+t+"表成功")})).catch((function(n){console.log("删除"+t+"表失败")}))},createTable:function(){var t=this,n=i.default.isOpen();if(n){var o='"id" INTEGER PRIMARY KEY AUTOINCREMENT,"loginName" text,"loginPhone" text,"exhId" text,"activityId" text,"doorId" text,"unionid" text,"userId" text,"type" text,"isLine" text,"isUpload" text,"createTime" text';i.default.createTable("scan_info",o).then((function(t){console.log("创建scan_info表成功",t)})).catch((function(n){console.log("创建表失败"),t.$tools.showToast("创建scan_info表失败",n)}));var e='"id" INTEGER PRIMARY KEY AUTOINCREMENT,"exhId" text,"exhName" text,"doorId" text,"loginName" text,"loginPhone" text,"dayTime" text, "count" text ,"createTime" text';i.default.createTable("statistics_num",e).then((function(t){console.log("创建statistics_num表成功",t)})).catch((function(n){console.log("创建表失败",n),t.$tools.showToast("创建statistics_num表失败",n)}))}else console.log("数据库未打开"),this.$tools.showToast("数据库未打开")},selCountNUm:function(){var t=this,n=this.formatDate((new Date).getTime());console.log("查询时间",n),this.time=n;var o=this.scanInfo;i.default.selectTableData("statistics_num","exhId",o[1],"doorId",o[2],"loginPhone",this.form.phoneNum,"dayTime",n).then((function(n){console.log("扫码统计结果",n),t.saomare=JSON.stringify(n),n.length<=0&&t.addStatisticsData()})).catch((function(n){console.log("查询扫码统计数据失败",n),t.$tools.showToast("查询扫码统计数据失败")}))},addStatisticsData:function(){var t=this.formatDate((new Date).getTime()),n={exhId:this.scanInfo[1],exhName:this.scanInfo[0],doorId:this.scanInfo[2],loginName:this.form.staffName,loginPhone:this.form.phoneNum,dayTime:t,count:"0",createTime:this.formatDate((new Date).getTime())},o="'".concat(n.exhId,"','").concat(n.exhName,"','").concat(n.doorId,"','").concat(n.loginName,"','").concat(n.loginPhone,"','").concat(n.dayTime,"','").concat(n.count,"','").concat(n.createTime,"'"),e="'exhId','exhName','doorId','loginName','loginPhone','dayTime','count','createTime'";i.default.insertTableData("statistics_num",o,e).then((function(t){console.log("新增数据成功",t)})).catch((function(t){console.log("失败",t)}))},formatDate:function(t){var n=new Date(t),o=n.getFullYear(),e=n.getMonth()+1<10?"0"+(n.getMonth()+1):n.getMonth()+1,i=n.getDate()<10?"0"+n.getDate():n.getDate();n.getHours(),n.getHours(),n.getMinutes(),n.getMinutes(),n.getSeconds(),n.getSeconds();return o+"-"+e+"-"+i},isLogin:function(){return""==this.form.username?(this.$tools.showToast("请输入用户名"),!1):""!=this.form.password||(this.$tools.showToast("请输入密码"),!1)},toLogin:function(){var t=this;if(!this.isLogin())return!1;var n=this.form;uni.setStorageSync("form_login",n),this.$axios.axios("post",this.$paths.loginpdaapi,n).then((function(n){200==n.code?(uni.setStorageSync("userInfo",n),t.$tools.showToast("登录成功"),setTimeout((function(t){uni.redirectTo({url:"/pages/sanCode/sanCode"})}),1e3)):t.$tools.showToast(n.msg)})).catch((function(t){}))}}};n.default=a},"953c":function(t,n,o){"use strict";var e=o("26c5"),i=o.n(e);i.a},c6ec:function(t,n,o){"use strict";o.r(n);var e=o("58dc"),i=o.n(e);for(var a in e)"default"!==a&&function(t){o.d(n,t,(function(){return e[t]}))}(a);n["default"]=i.a},f1d5:function(t,n,o){var e=o("24fb");n=e(!1),n.push([t.i,".onetihs[data-v-11a8125e]{background-color:#c9c9c9;color:#371b64;font-size:%?25?%;width:%?700?%;padding:%?25?% %?25?%;margin-left:%?25?%;margin-top:%?40?%}.shuruku[data-v-11a8125e]{font-size:%?27?%;font-weight:700}.xiayibubtn[data-v-11a8125e]{width:%?600?%;height:%?100?%;text-align:center;line-height:%?100?%;background-color:#2e7efc;color:#fff;border-radius:%?10?%;margin-top:%?55?%}.clickmam[data-v-11a8125e]{width:%?160?%;height:%?64?%;background:linear-gradient(180deg,#2e7efc,#2e7efc);border-radius:%?12?%;opacity:1;font-size:%?25?%;text-align:center;line-height:%?64?%;color:#fff}.gengxinbtn[data-v-11a8125e]{position:fixed;bottom:%?20?%;left:%?20?%;color:#2e7efc}.gengxinbtn1[data-v-11a8125e]{position:fixed;bottom:%?20?%;right:%?20?%;color:#2e7efc\r\n\t/* background-color: #371B64; */}",""]),t.exports=n},f5e1:function(t,n,o){o("99af"),o("d3b7"),t.exports={dbName:"zht",dbPath:"_downloads/zht.db",isOpen:function(){var t=plus.sqlite.isOpenDatabase({name:this.dbName,path:this.dbPath});return t},openSqlite:function(){var t=this;return new Promise((function(n,o){plus.sqlite.openDatabase({name:t.dbName,path:t.dbPath,success:function(t){n(t)},fail:function(t){o(t)}})}))},closeSqlite:function(){var t=this;return new Promise((function(n,o){plus.sqlite.closeDatabase({name:t.dbName,success:function(t){n(t)},fail:function(t){o(t)}})}))},createTable:function(t,n){var o=this;return new Promise((function(e,i){plus.sqlite.executeSql({name:o.dbName,sql:"CREATE TABLE IF NOT EXISTS ".concat(t,"(").concat(n,")"),success:function(t){e(t)},fail:function(t){i(t)}})}))},dropTable:function(t){var n=this;return new Promise((function(o,e){plus.sqlite.executeSql({name:n.dbName,sql:"DROP TABLE ".concat(t),success:function(t){o(t)},fail:function(t){e(t)}})}))},insertTableData:function(t,n,o){var e=this;if(void 0!==t&&void 0!==n){var i="{}"==JSON.stringify(n);if(i)return new Promise((function(t,n){n("错误添加")}));if(void 0==o)var a="INSERT INTO ".concat(t," VALUES('").concat(n,"')");else a="INSERT INTO ".concat(t," (").concat(o,") VALUES(").concat(n,")");return new Promise((function(t,n){plus.sqlite.executeSql({name:e.dbName,sql:a,success:function(n){t(n)},fail:function(t){n(t)}})}))}return new Promise((function(t,n){n("错误添加")}))},insertOrReplaceData:function(t,n,o){var e=this;if(void 0!==t&&void 0!==n){if(void 0==o)var i="INSERT OR REPLACE INTO ".concat(t," VALUES('").concat(n,"')");else i="INSERT OR REPLACE INTO ".concat(t," (").concat(o,") VALUES(").concat(n,")");return new Promise((function(t,n){plus.sqlite.executeSql({name:e.dbName,sql:i,success:function(n){t(n)},fail:function(t){n(t)}})}))}return new Promise((function(t,n){n("错误添加")}))},selectTableData:function(t,n,o,e,i,a,s,c,l){var u=this;if(void 0!==t){if(void 0!==n&&void 0!==e&&void 0!==a&&void 0!==c)var r="SELECT * FROM ".concat(t," WHERE ").concat(n," = '").concat(o,"' AND ").concat(e," = '").concat(i,"' AND ").concat(a,"='").concat(s,"' AND ").concat(c,"='").concat(l,"' ");else if(void 0!==n&&void 0!==e&&void 0!==a)r="SELECT * FROM ".concat(t," WHERE ").concat(n," = '").concat(o,"' AND ").concat(e," = '").concat(i,"' AND ").concat(a,"='").concat(s,"'");if(void 0!==n&&void 0!==e&&void 0==a)r="SELECT * FROM ".concat(t," WHERE ").concat(n," = '").concat(o,"' AND ").concat(e," = '").concat(i,"'");if(void 0!==n&&void 0==e&&void 0==a)r="SELECT * FROM ".concat(t," WHERE ").concat(n," = '").concat(o,"'");if(void 0==n)r="SELECT * FROM ".concat(t);return console.log("查询sql语句",r),new Promise((function(t,n){plus.sqlite.selectSql({name:u.dbName,sql:r,success:function(n){t(n)},fail:function(t){n(t)}})}))}return new Promise((function(t,n){n("错误查询")}))},selectTableData1:function(t,n){var o=this;if(void 0!==t){var e="SELECT * FROM "+t+" where isUpload='false' and  isLine='false'  LIMIT "+n;return console.log("查询sql语句",e),new Promise((function(t,n){plus.sqlite.selectSql({name:o.dbName,sql:e,success:function(n){t(n)},fail:function(t){n(t)}})}))}return new Promise((function(t,n){n("错误查询")}))},selectgetTotalCont:function(t){var n=this;if(void 0!==t){var o="select count(*) count FROM scan_info WHERE isUpload='false' and isLine='false'";return console.log("查询sql语句",o),new Promise((function(t,e){plus.sqlite.selectSql({name:n.dbName,sql:o,success:function(n){t(n)},fail:function(t){e(t)}})}))}return new Promise((function(t,n){n("错误查询")}))},deleteTableData:function(t,n,o,e,i){var a=this;if(void 0!==t){if(void 0==n)var s="DELETE FROM ".concat(t);else if(void 0!==e)s="DELETE FROM ".concat(t," WHERE ").concat(n," = '").concat(o,"' AND ").concat(e," = '").concat(i,"'");else s="DELETE FROM ".concat(t," WHERE ").concat(n," = '").concat(o,"'");return new Promise((function(t,n){plus.sqlite.executeSql({name:a.dbName,sql:s,success:function(n){t(n)},fail:function(t){n(t)}})}))}return new Promise((function(t,n){n("错误删除")}))},updateTableData:function(t,n,o,e){var i=this;if(void 0==o)var a="UPDATE ".concat(t," SET ").concat(n);else a="UPDATE ".concat(t," SET ").concat(n," WHERE ").concat(o," = '").concat(e,"'");return new Promise((function(t,n){plus.sqlite.executeSql({name:i.dbName,sql:a,success:function(n){t(n)},fail:function(t){n(t)}})}))},pullSQL:function(t,n,o){var e=this;return new Promise((function(i,a){plus.sqlite.selectSql({name:e.dbName,sql:"SELECT * FROM ".concat(t," ORDER BY '").concat(n,"' DESC LIMIT 15 OFFSET '").concat(o,"'"),success:function(t){i(t)},fail:function(t){a(t)}})}))},selWuxiaoNum:function(){var t=this;return new Promise((function(n,o){plus.sqlite.selectSql({name:t.dbName,sql:'SELECT count(*) count FROM scan_info WHERE isLine="false" AND isUpload="no"',success:function(t){n(t)},fail:function(t){o(t)}})}))},delWuxiaodata:function(){var t=this;return new Promise((function(n,o){plus.sqlite.selectSql({name:t.dbName,sql:"DELETE FROM scan_info WHERE isUpload ='no'",success:function(t){n(t)},fail:function(t){o(t)}})}))}}}}]);